---
title: "20220926 React 공부"
excerpt: "React 공부"

categories:
  - TIL
tags:
  - [TIL, React]

permalink: /TIL/20220926/

toc: true
toc_sticky: true

date: 2022-09-26
last_modified_at: 2022-09-26
---

## [React] 리액트를 다루는 기술

### 4장 이벤트 핸들링
JSBin(https://jsbin.com/) : 코드 테스트 사이트

```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>JS Bin</title>
</head>
<body>
  <button onclick = "alert('executed')">
    Click Me
   </button>
</body>
</html>
```
```javascript
import {useState} from 'react';

const Say = () => {
  const [message, setMessage] = useState('');
  const onClickEnter = () => setMessage('안녕하세요!');
  const onClickLeave = () => setMessage('안녕히 가세요!');
  
  const [color, setColor] = useState('black');
  
  return (
    <div>
      <button onClick = {onClickEnter}>입장</button>
      <button onClick = {onClickLeave}>퇴장</button>
      <h1>{message}</h1>
     </div>
  );
};

export default Say;
```

#### 이벤트를 사용할 때 주의 사항
1. 이벤트 이름은 카멜 표기법으로 작성한다. ie. onkeyup -> onKeyUp <br/>
❓소문자 html 태그

2. 이벤트에 실행할 자바스크립트 코드를 전달하는 것이 아니라, 함수 형태의 값을 전달한다. <br/>
(html) 이벤트 설정 시 큰따옴표 안에 실행할 코드를 넣음. ie. <button onclick = "alert('executed')"> <br/>
(react) 함수 형태의 객체를 전달함. ie. <button onClick = {onClickEnter}> <br/>
  a. 함수를 랜더링을 하는 동시에 바로 만들어 전달. <br/>
  b. 함수를 렌더링 외부에 미리 만들어 전달. <br/>
  
3. DOM 요소에만 이벤트를 설정할 수 있다. <br/>
div, button, input, form, span등의 DOM 요소에는 이벤트를 설정할 수 있지만, 우리가 직접 만든 컴포넌트에는 이벤트를 자체적으로 설정할 수 없다. <br/>
  ex) <MyComponent onClick = {doSomething}/> 에서, <br/>
  MyComponent를 클릭할 때 domSomething 함수를 실행하는 것이 아니라, 그냥 이름이 onClick인 props를 MyComponent에게 전달해 줄 뿐임.❓ <br/>
  따라서 컴포넌트에 자체적으로 이벤트를 설정할 수 없다. 하지만 전달받은 props에 컴포넌트 내부의 DOM 이벤트로 설정할 수는 있다. ie. <div onClick = {this.props.onClick}> <br/>
  
  
#### 리액트에서 지원하는 이벤트 종류
- Clipboard
- Touch
- Composition
- UI
- KeyBoard
- Wheel
- Focus
- Media
- Form
- Image
- Mouse
- Animation
- Selection
- Transition
- etc. 리액트 매뉴얼(https://facebook.github.io/react/docs/events.html)
  

#### 예제로 이벤트 핸들링 익히기

##### 컴포넌트 생성
EventPractice.js - 클래스형 컴포넌트 생성
  ```javascript
  import {Component} from 'react';
  
  class EventPractice extends Component {
    render() {
      return (
        <div>
          <h1>이벤트 연습</h1>
        </div>
      );
    }
  }
  
  export default EventPractice;
  ```
  
##### App.js에서 생성한 컴포넌트 렌더링
  ```javascript
  import EventPractice from './EventPractice';
  
  const App = () => {
    return <EventPractice />;
  };
  
  export default App;
  ```
  
##### 이벤트 핸들링
  EventPractice.js - EventPractice 컴포넌트에 input 요소 렌더링, input 요소에 onChange 이벤트 설정.
  ```javascript
  import {Component} from 'react';
  
  class EventPractice extends Component {
    render() {
      return (
        <div>
          <h1>이벤트 연습</h1>
          <input
                 type = "text"
                 name = "message"
                 placeholder = "아무거나 입력해 보세요"
                 onChange = {
                   (e) => {
                      console.log(e);
                   }
                 }
          />
        </div>
      );
    }
  }
  
  export default EventPractice;
  ```
  콘솔에 기록되는 e 객체 : SyntheticEvent. 웹 브라우저의 네이티브 이벤트를 감싸는 객체.❓ <br/>
  네이티브 이벤트와 인터페이스가 같으므로 순수 자바스크립트에서 html 이벤트를 다룰 때와 똑같이 사용하면 됨.❓
  
  ###### SyntheticEvent
  이벤트가 끝나고 나면 이벤트 초기화 됨. <br/>
  비동기적 이벤트 객체 참조를 원한다면 e.persist() 함수 호출해야. <br/>
  ❓비동기적  <br/>
  ❓e.persist()  <br/>
  EventPractice.js - onChange 코드 수정
  ```javascript
  onChange = {
    (e) => {
      console.log(e.target.value);
    }
  }
  ```
  수정 후에는 값이 바뀔 때마다 바뀌는 값을 콘솔에 기록함. <br/>
  ❓e.persist()와 e.target.value의 관계 <br/>
  
  ##### state에 input 값 담기
  EventPractice.js - constructor에서 state 초깃값 설정, 이벤트 핸들링 함수 내부에서 this.setState 메서드 호출하여 state 업데이트, input의 value 값을 state에 있는 값으로 설정.
  ```javascript
  import {Component} from 'react';
  
  class EventPractice extends Component {
  
    state = {
      message: ''
    }
  
    render() {
      return (
        <div>
          <h1>이벤트 연습</h1>
          <input
                 type = "text"
                 name = "message"
                 placeholder = "아무거나 입력해 보세요"
                 value = {this.state.message}
                 onChange = {
                   (e) => {
                      this.setState({
                        message: e.target.value
                      })
                   }
                 }
          />
        </div>
      );
    }
  }
  
  export defalut EventPractice;
  ```
  ❓input의 value 값으로 state 값을 넣어주는 건 어디에 쓰일까. value 값을 비워두면 어떻게 될까.
  
  ##### 버튼을 누를 때 comment 값을 공백으로 설정
  EventPractice.js - button을 만들고 클릭 이벤트가 발생하면 현재 comment 값을 메시지 박스로 띄운 후 comment 값을 공백으로 설정. (for 입력한 값이 state에 잘 들어갔고 인풋에서 그 값을 제대로 반영하는지 검증.)
  ```javascript
  import {Component} from 'react';
  
  class EventPractice extends Component {
  
    state = {
      message: ''
    }
  
    render() {
      return (
        <div>
          <h1>이벤트 연습</h1>
          <input
                 type = "text"
                 name = "message"
                 placeholder = "아무거나 입력해 보세요"
                 value = {this.state.message}
                 onChange = {
                   (e) => {
                      this.setState({
                        message: e.target.value
                      })
                   }
                 }
          />
          <button onClick = {
            () => {
              alert(this.state.message);
              this.setState({
                message: ''  
              });
            }
          }>확인</button>
        </div>
      );
    }
  }
  
  export defalut EventPractice;
  ```
❓갑자기 comment는 뭘까. comment는 그냥 입력한 값 의미.
  
 
